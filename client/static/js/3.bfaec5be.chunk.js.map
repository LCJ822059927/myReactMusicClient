{"version":3,"sources":["common/image/album.png","common/image/headset.svg","action/rankAction.js","api/rank.js","api/rankDetails.js","components/Rank/RankList/RankList.js","components/Rank/Rank.js"],"names":["module","exports","__webpack_require__","p","d","__webpack_exports__","rankAction_rankAction","rankAction_rankDetailsAction","rankDetailsEmptyAction","rankAction","dispatch","Jsonp","g_tk","uin","format","inCharset","outCharset","notice","platform","needNewCode","_","param","then","res","code","type","data","_ref","response","rankDetailsAction","topId","topid","tpl","page","rankDetailsApi","RankList","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","history","push","imgOnload","e","index","target","parentNode","removeChild","setState","imgArr","state","map","item","i","src","rankList","rankStore","topList","list","react_default","a","createElement","key","className","onClick","id","ablumLogo","alt","onLoad","style","display","picUrl","headersetLogo","listenFormat","listenCount","topTitle","songList","songname","singername","Array","length","fill","Component","Rank","rankDisplay","flag","Scroll","scrollName","top","bottom","playerStore","smallPlayer","Rank_RankList_RankList","Loading","connect","scrollStroe","scrollStore"],"mappings":"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","file":"static/js/3.bfaec5be.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4BAMAAADLSivhAAAAHlBMVEXLy8u8vLy+vr7Hx8fFxcXBwcHExMS/v7/CwsLAwMAKdaVfAAAACnRSTlMzZVs7P01EVUhS0jME5AAAAm5JREFUWMPtWLFyEzEQVXxOcnSsfPbFXQRp6C4MMJRnKCBdaEILw9Anw6Sg40iRNpfJB2dlx34nJ9JGqvUKe+zTrnbfrla7pzIyMjIyMhgfvhsiffkrQXTvlh7w5kes7AkNcBcn+4lF6rPPSr37fUFER5Gy+mr946OJkn5LNG3ws/hG9PrZXLGscsDSEmtYOm+Ug6KHOslo3aotjI1gONad89f7P86/+9AYwoIO7Pb86aCjSpYtjOWmJKq3WdSNKDyiaml63T6y6FCm2m7cYRtsHSQcS3afDGsnxvrYUt0jLg7hE0HYaLvx3PNMCDJV1r4bTxBbgesbVlA//fCFwPeCGjXyrSmEPDFTa3XjC6MOu/yS9c98j3eoDbp86reawxB0eoctPvarL9gwP35qdqwOUDILCPd8DgeUnhi6dMjr5iGyJ0vOUEPdSsguKRXyqWTOVihpicrlJHCkzlXxv92commrvtCQv/3Awdq1uxabmNcNagAWeOAoXse7oAPHtECOtG6ar6wfZuBhMEcQtik0hrIEwgowFfyMFl6vK4elIVLYJSl5Z5gtE3YxWxeff9vCcqi6GhrdUMlJsjnXvRaTBFGBGZOVyzMxPaEY/llnix6WwjS5zCxIn33tSTcuo17QxG0RLE7lYoAyBJTEOJLLEArgEOPrv1dSAZR9AidC0Qfiij5KZ9x1g4sOiLroUHvSrtgRzl/85T6G8vi2Qhmd9AytFBDZSu2hxsc0cWgf/b2hhBEoi2pc0TIDES0zmnVGZLOOMQEQxoTEASV9NEofytLHwfRBNH0ETh++08f+1BcOr/iFQ0ZGRkZGhlL3FYxcnd2iqc4AAAAASUVORK5CYIIvKiAgfHhHdjAwfDI3MTAzYTc1ZWRmN2Y0MzQ1ZDFjMTc4N2IwYjM4ZDkyICov\"","module.exports = __webpack_public_path__ + \"static/media/headset.1443f937.svg\";","import {rankApi} from '../api/rank'\r\nimport {rankDetailsApi} from '../api/rankDetails' ;\r\nexport const rankAction = () => {\r\n    return dispatch => {\r\n        return rankApi().then(\r\n            res => {\r\n                if (res.code === 0) {\r\n                    return dispatch({type: 'rankList', data: res.data})\r\n                } else {\r\n                    return dispatch({type: 'rankError'})\r\n                }\r\n            },\r\n            ({response}) => {\r\n                dispatch({type: 'rankError'})\r\n            }\r\n        )\r\n    }\r\n};\r\n\r\nexport const rankDetailsAction=(topId)=>{\r\n    return dispatch=>{\r\n        rankDetailsApi(topId).then(res=>{\r\n            if(res.code===0){\r\n                return dispatch({type:\"rankDetailsList\",data:res})\r\n            }else{\r\n                return dispatch({type:\"rankDetailsError\"})\r\n            }\r\n        })\r\n    }\r\n};\r\nexport const rankDetailsEmptyAction=()=>{\r\n    return dispatch=>dispatch({type:\"rankDetailsEmpty\"})\r\n};\r\n","import Jsonp from '../common/js/myJsonp';\r\n\r\nexport const rankApi = () => {\r\n    const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_myqq_toplist.fcg?';\r\n    const Options = {\r\n        param: 'jsonpCallback'\r\n    };\r\n    const data = {\r\n        g_tk: 5381,\r\n        uin: 0,\r\n        format: 'jsonp',\r\n        inCharset: 'utf-8',\r\n        outCharset: 'utf-8',\r\n        notice: 0,\r\n        platform: 'h5',\r\n        needNewCode: 1,\r\n        _: 154564564980,\r\n    };\r\n    return Jsonp(url, data, Options)\r\n};\r\n","import Jsonp from '../common/js/myJsonp';\r\n\r\nexport const rankDetailsApi = (topid) => {\r\n    const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_toplist_cp.fcg?';\r\n    const Options = {\r\n        param: 'jsonpCallback'\r\n    };\r\n    const data = {\r\n        g_tk: 5381,\r\n        uin: 0,\r\n        format: 'jsonp',\r\n        inCharset: 'utf-8',\r\n        outCharset: 'utf-8',\r\n        notice: 0,\r\n        platform: 'h5',\r\n        needNewCode: 1,\r\n        tpl: 3,\r\n        page: 'detail',\r\n        type: 'top',\r\n        topid: topid,\r\n        _: 1545904678804\r\n    };\r\n    return Jsonp(url, data, Options)\r\n};\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './RankList.styl';\r\nimport headersetLogo from '../../../common/image/headset.svg';\r\nimport {listenFormat} from \"../../../common/js/format\";\r\n//引入组件\r\nimport ablumLogo from '../../../common/image/album.png';\r\nclass RankList extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state={\r\n            imgArr:[]\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.setState({\r\n            imgArr:new Array(this.props.rankStore.topList.length).fill(ablumLogo)\r\n        })\r\n    }\r\n\r\n    static propTypes = {\r\n        rankStore: PropTypes.object.isRequired,\r\n        rankDetailsAction:PropTypes.func.isRequired,\r\n        rankDetailsEmptyAction:PropTypes.func.isRequired,\r\n    };\r\n    rankDetailsAction=(topId)=>{\r\n        this.props.rankDetailsEmptyAction();\r\n        this.props.rankDetailsAction(topId);\r\n        this.props.history.push('/RankDetails?topId='+topId);\r\n    };\r\n    imgOnload=(e,index)=>{\r\n        if(!e.target.parentNode.removeChild===null){\r\n            e.target.parentNode.removeChild(e.target);\r\n        }\r\n        this.setState({\r\n            imgArr:this.state.imgArr.map((item,i)=>{\r\n                if(i===index){\r\n                    item=e.target.src\r\n                }\r\n                return item\r\n            })\r\n        })\r\n    }\r\n\r\n    rankList = (rankStore) => {\r\n        return rankStore.topList.map((list, index) => {\r\n            return (\r\n                <li key={index}>\r\n                    <ul className='rank_item_container'>\r\n                        <li className='rank_item' onClick={()=>this.rankDetailsAction(list.id)}>\r\n                            <div className='rank_image_container'>\r\n                                <img className='rank_image' src={this.state.imgArr[index]?this.state.imgArr[index]:ablumLogo} alt=\"\"/>\r\n                                <img onLoad={(e)=>this.imgOnload(e,index)} style={{display:\"none\"}} src={list.picUrl} alt=\"\"/>\r\n                                <div className='rank_listen_count'>\r\n                                    <img src={headersetLogo} alt=\"\"/>\r\n                                    <span>{listenFormat(list.listenCount)}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div className='rank_info_container'>\r\n                                <div className='rank_list_toptitle'>{list.topTitle}</div>\r\n                                {list.songList.map((songList, index) => {\r\n                                    return (\r\n                                        <div key={index} className='rank_list_item_info'>\r\n                                            <div className='rank_list_item_index'>{index + 1}</div>\r\n                                            <div className='rank_list_item_song'>{songList.songname}</div>\r\n                                            <div className='rank_list_item_name'>{songList.singername}</div>\r\n                                        </div>\r\n                                    )\r\n                                })}\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </li>\r\n            )\r\n        })\r\n    };\r\n\r\n    render() {\r\n        const {rankStore} = this.props;\r\n        return (\r\n            <ul className='rank_container'>\r\n                {this.rankList(rankStore)}\r\n            </ul>\r\n        )\r\n    }\r\n}\r\n\r\nexport default RankList\r\n","import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport {rankAction, rankDetailsAction, rankDetailsEmptyAction} from \"../../action/rankAction\";\r\nimport RankList from './RankList/RankList';\r\nimport Loading from '../common/Loading/Loading';\r\nimport Scroll from \"../common/Scroll/Scroll\";\r\n\r\n//引入组件\r\nclass Rank extends Component {\r\n    static propTypes = {\r\n        rankAction: PropTypes.func.isRequired,\r\n        rankStore: PropTypes.object.isRequired,\r\n        playerStore: PropTypes.object.isRequired,\r\n        rankDetailsAction: PropTypes.func.isRequired,\r\n    };\r\n    componentDidMount() {\r\n        this.props.rankAction()\r\n    }\r\n\r\n    rankDisplay = (rankStore) => {\r\n        if (rankStore.flag) {\r\n            return (\r\n                <Scroll scrollName='rankScroll'\r\n                        top='5.7rem'\r\n                        bottom={!this.props.playerStore.smallPlayer ? 0 : '10vh'}\r\n                >\r\n                    <RankList\r\n                        history={this.props.history}\r\n                        rankDetailsAction={this.props.rankDetailsAction}\r\n                        rankStore={rankStore}\r\n                        rankDetailsEmptyAction={this.props.rankDetailsEmptyAction}\r\n                    />\r\n                </Scroll>\r\n            )\r\n        } else {\r\n            return <Loading/>\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {rankStore} = this.props;\r\n        return (\r\n            this.rankDisplay(rankStore)\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        scrollStroe:state.scrollStore,\r\n        rankStore: state.rankStore,\r\n        playerStore: state.playerStore\r\n    }\r\n};\r\nexport default connect(mapStateToProps, {rankAction, rankDetailsAction, rankDetailsEmptyAction})(Rank)\r\n"],"sourceRoot":""}