{"version":3,"sources":["common/js/splitRoute.js","common/image/album.png","action/hotSong.js","action/recommendAction.js","api/recommend.js","components/Hot/Hot.js"],"names":["__webpack_exports__","search","searchArr","slice","split","newArr","i","length","push","module","exports","__webpack_require__","d","hotSongAction","hotSongLoadingAction","axios__WEBPACK_IMPORTED_MODULE_0__","axios__WEBPACK_IMPORTED_MODULE_0___default","n","index","dispatch","axios","get","then","res","data","code","type","req_0","total","date","Date","getTime","value","_","g_tk","uin","format","inCharset","outCharset","notice","platform","needNewCode","new_format","pic","disstid","json","utf8","onlysong","nosign","song_begin","song_num","params","cdlist","recommendAction_recommendAction","recommendAction","Jsonp","param","_ref","response","Hot","state","imgSrc","listIndex","hotSongLoading","recommendStore","songList","id","_this","props","hotSongStore","tracks","hotBack","window","history","back","imgOnload","e","setState","target","src","hotSongdisplay","spiltRoute","location","flag","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","react__WEBPACK_IMPORTED_MODULE_5__","ref","className","onClick","backLogo","alt","ablumLogo","onLoad","picUrl","style","display","songListDesc","songListAuthor","listenFormat","accessnum","playAllSongAction","width","playLogo","_common_Scroll_Scroll__WEBPACK_IMPORTED_MODULE_10__","onHotScroll","scrollName","paddingTop","bottom","playerStore","smallPlayer","hotTop","refs","hotButton","map","item","songPlayAction","file","media_mid","album","mid","interval","singer","name","key","title","songLoading","_common_Loading_Loading__WEBPACK_IMPORTED_MODULE_7__","this","_this$props","Component","connect"],"mappings":"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","file":"static/js/1.4d51dbcc.chunk.js","sourcesContent":["export default (search) => {\r\n\r\n    let searchArr = search.slice(1).split('&')\r\n    let newArr = []\r\n    for (let i = 0; i < searchArr.length; i++) {\r\n        newArr.push(searchArr[i].split('='))\r\n    }\r\n    return newArr\r\n}\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4BAMAAADLSivhAAAAHlBMVEXLy8u8vLy+vr7Hx8fFxcXBwcHExMS/v7/CwsLAwMAKdaVfAAAACnRSTlMzZVs7P01EVUhS0jME5AAAAm5JREFUWMPtWLFyEzEQVXxOcnSsfPbFXQRp6C4MMJRnKCBdaEILw9Anw6Sg40iRNpfJB2dlx34nJ9JGqvUKe+zTrnbfrla7pzIyMjIyMhgfvhsiffkrQXTvlh7w5kes7AkNcBcn+4lF6rPPSr37fUFER5Gy+mr946OJkn5LNG3ws/hG9PrZXLGscsDSEmtYOm+Ug6KHOslo3aotjI1gONad89f7P86/+9AYwoIO7Pb86aCjSpYtjOWmJKq3WdSNKDyiaml63T6y6FCm2m7cYRtsHSQcS3afDGsnxvrYUt0jLg7hE0HYaLvx3PNMCDJV1r4bTxBbgesbVlA//fCFwPeCGjXyrSmEPDFTa3XjC6MOu/yS9c98j3eoDbp86reawxB0eoctPvarL9gwP35qdqwOUDILCPd8DgeUnhi6dMjr5iGyJ0vOUEPdSsguKRXyqWTOVihpicrlJHCkzlXxv92commrvtCQv/3Awdq1uxabmNcNagAWeOAoXse7oAPHtECOtG6ar6wfZuBhMEcQtik0hrIEwgowFfyMFl6vK4elIVLYJSl5Z5gtE3YxWxeff9vCcqi6GhrdUMlJsjnXvRaTBFGBGZOVyzMxPaEY/llnix6WwjS5zCxIn33tSTcuo17QxG0RLE7lYoAyBJTEOJLLEArgEOPrv1dSAZR9AidC0Qfiij5KZ9x1g4sOiLroUHvSrtgRzl/85T6G8vi2Qhmd9AytFBDZSu2hxsc0cWgf/b2hhBEoi2pc0TIDES0zmnVGZLOOMQEQxoTEASV9NEofytLHwfRBNH0ETh++08f+1BcOr/iFQ0ZGRkZGhlL3FYxcnd2iqc4AAAAASUVORK5CYIIvKiAgfHhHdjAwfDI3MTAzYTc1ZWRmN2Y0MzQ1ZDFjMTc4N2IwYjM4ZDkyICov\"","import axios from 'axios'\r\nexport const hotSongAction=(index)=>{\r\n    return dispatch=>{\r\n        return axios.get('/api/hot?index='+index).then(res=>{\r\n            if(res.data.code===0){\r\n                dispatch({type:'hotSong',data:res.data.req_0.data})\r\n                return true\r\n            }else{\r\n                return false\r\n            }\r\n        })\r\n    }\r\n}\r\nexport const hotSongLoadingAction=(index,total)=>{\r\n    let date=new Date().getTime()\r\n    return dispatch=>{\r\n        const value = {\r\n            _: date,\r\n            g_tk: 1580658300,\r\n            uin: 822059927,\r\n            format: 'json',\r\n            inCharset: 'utf-8',\r\n            outCharset: 'utf-8',\r\n            notice: 0,\r\n            platform: 'h5',\r\n            needNewCode: 1,\r\n            new_format: 1,\r\n            pic: 500,\r\n            disstid: index,\r\n            type: 1,\r\n            json: 1,\r\n            utf8: 1,\r\n            onlysong: 0,\r\n            nosign: 1,\r\n            song_begin: total,\r\n            song_num: 15\r\n        };\r\n        return axios.get('/api/hotSongGet', {\r\n           params: value\r\n        }).then(res=>{\r\n            dispatch({type:'hotSongLoading',data:res.data.cdlist})\r\n        })\r\n    }\r\n\r\n}\r\n","import {recommendApi} from '../api/recommend'\r\n\r\nexport const recommendAction = () => {\r\n    return dispatch => {\r\n        return recommendApi().then(\r\n            res => {\r\n                if (res.code === 0) {\r\n                    return dispatch({type: 'recommendList', data: res.data})\r\n                } else {\r\n                    return dispatch({type: 'recommendError'})\r\n                }\r\n            },\r\n            ({response}) => {\r\n                dispatch({type: 'recommendError'})\r\n            }\r\n        )\r\n    }\r\n}\r\n\r\n","import Jsonp from '../common/js/myJsonp';\r\n\r\n\r\nexport const recommendApi = () => {\r\n    const url = 'https://c.y.qq.com/musichall/fcgi-bin/fcg_yqqhomepagerecommend.fcg?';\r\n    const Options = {\r\n        param: 'jsonpCallback'\r\n    };\r\n    const data = {\r\n        g_tk: 5381,\r\n        uin: 0,\r\n        format: 'json',\r\n        inCharset: 'utf-8',\r\n        outCharset: 'utf-8',\r\n        notice: 0,\r\n        platform: 'h5',\r\n        needNewCode: 1,\r\n        _: 1544528286930\r\n    }\r\n    return Jsonp(url, data, Options)\r\n}\r\n","import React, {Component, Fragment} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport Loading from '../common/Loading/Loading';\r\nimport './Hot.styl';\r\nimport PropTypes from 'prop-types';\r\nimport {listenFormat} from '../../common/js/format';\r\nimport Scroll from '../common/Scroll/Scroll';\r\nimport {playAllSongAction, songPlayAction} from \"../../action/songPlayerAction\";\r\nimport spiltRoute from \"../../common/js/splitRoute\";\r\nimport {hotSongAction,hotSongLoadingAction} from \"../../action/hotSong\";\r\nimport {recommendAction} from '../../action/recommendAction'\r\n//\r\nimport playLogo from \"../../common/image/play.svg\";\r\nimport backLogo from '../../common/image/back.svg';\r\nimport ablumLogo from '../../common/image/album.png';\r\n\r\nclass Hot extends Component {\r\n    static propTypes = {\r\n        hotSongAction: PropTypes.func.isRequired,\r\n        songPlayAction: PropTypes.func.isRequired,\r\n        playAllSongAction: PropTypes.func.isRequired,\r\n        hotSongLoadingAction: PropTypes.func.isRequired\r\n    }\r\n    state = {\r\n        imgSrc: '',\r\n        listIndex: ''\r\n    }\r\n\r\n    componentWillMount() {\r\n        if (!this.props.hotSongStore.flag) {\r\n            this.props.hotSongAction(spiltRoute(this.props.history.location.search)[0][1])\r\n            this.props.recommendAction()\r\n        }\r\n    }\r\n    hotSongLoading=(recommendStore,listIndex)=>{\r\n        let index=recommendStore.songList[listIndex].id\r\n        this.props.hotSongLoadingAction(index,this.props.hotSongStore.data.tracks.length+1)\r\n    }\r\n    hotBack = () => {\r\n        window.history.back()\r\n    };\r\n    imgOnload = (e) => {\r\n        this.setState({\r\n            imgSrc: e.target.src\r\n        })\r\n    }\r\n    hotSongdisplay = (hotSongStore, recommendStore) => {\r\n        let listIndex = spiltRoute(this.props.history.location.search)[0][1]\r\n        if(!listIndex){\r\n            return null\r\n        }\r\n        if (hotSongStore.flag && recommendStore.flag) {\r\n            return (\r\n                <Fragment>\r\n                    <div ref='hotHead' className='hot_head'>\r\n                        <img onClick={this.hotBack} src={backLogo} alt=\" \"/>\r\n                    </div>\r\n                    <div ref='hotTop' className='hot_top'>\r\n                        <div className='hot_info'>\r\n                            <div className='hot_info_image'>\r\n                                <img src={this.state.imgSrc ? this.state.imgSrc : ablumLogo}\r\n                                     alt=\" \"/>\r\n                                <img onLoad={(e) => this.imgOnload(e)}\r\n                                     src={recommendStore.flag ? recommendStore.songList[listIndex].picUrl : ''}\r\n                                     style={{display: 'none'}} alt=\"\"/>\r\n                            </div>\r\n                            <div className='hot_info_text'>\r\n                                <div className='song_desc'>{recommendStore.songList[listIndex].songListDesc}</div>\r\n                                <div>创建者：{recommendStore.songList[listIndex].songListAuthor}</div>\r\n                                <div\r\n                                    className='hot_info_text_listen'>播放量：{listenFormat(recommendStore.songList[listIndex].accessnum)}</div>\r\n                            </div>\r\n                        </div>\r\n                        <div ref='hotButton' className='hot_button'>\r\n                            <button onClick={() => this.props.playAllSongAction(hotSongStore.data.tracks, '', true)}\r\n                                    className='play_btn'>\r\n                                <span ref='fontsize'>播放全部</span>\r\n                                <img style={{width: 20}} src={playLogo} alt=\" \"/>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    <Scroll\r\n                        onHotScroll={true}\r\n                        scrollName='hotScroll'\r\n                        paddingTop='245px'\r\n                        bottom={!this.props.playerStore.smallPlayer ? 0 : '10vh'}\r\n                        hotTop={this.refs.hotTop}\r\n                        hotButton={this.refs.hotButton}\r\n                    >\r\n                        <div className='hot_song_list_title'>排行榜 共{hotSongStore.data.tracks.length}首</div>\r\n                        <ul className='hot_song_list_container'>\r\n                            {hotSongStore.data.tracks.map((item) => {\r\n                                return (\r\n                                    <li className=\"hot_song_list_item\"\r\n                                        onClick={() => this.props.songPlayAction(this.props.playerStore.songList, item.file.media_mid, item.album.mid, item.interval, item.singer[0].name, item.name)}\r\n                                        key={item.id}>\r\n                                        <div>{item.title}</div>\r\n                                        <div>{item.album.name}</div>\r\n                                    </li>)\r\n                                }\r\n                            )}\r\n                            {hotSongStore.songLoading?<li className='click_loading' onClick={()=>this.hotSongLoading(recommendStore,listIndex)}>点击加载更多>></li>:null}\r\n                        </ul>\r\n                    </Scroll>\r\n                </Fragment>\r\n            )\r\n        } else {\r\n            return <Loading/>\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {hotSongStore, recommendStore} = this.props;\r\n        return this.hotSongdisplay(hotSongStore, recommendStore)\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        hotSongStore: state.hotSongStore,\r\n        recommendStore: state.recommendStore,\r\n        playerStore: state.playerStore\r\n    }\r\n}\r\nexport default connect(mapStateToProps, {songPlayAction,hotSongLoadingAction, playAllSongAction, hotSongAction, recommendAction})(Hot)\r\n"],"sourceRoot":""}