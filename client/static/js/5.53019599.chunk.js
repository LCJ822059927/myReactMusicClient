(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{182:function(e,t,a){},184:function(e,t,a){e.exports=a.p+"static/media/search.7b54580f.svg"},185:function(e,t,a){},187:function(e,t,a){},189:function(e,t,a){e.exports=a.p+"static/media/time.97254c86.svg"},190:function(e,t,a){},199:function(e,t,a){"use strict";a.r(t);var r=a(22),n=a(3),o=a(4),s=a(6),c=a(5),i=a(7),l=a(0),h=a.n(l),u=a(19),p=a(40),m=a(42),y=a.n(m),d=0,f=a(12),g=(a(182),a(184)),_=a.n(g),v=a(16),S=(a(185),function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).hotKeyDisplay=function(){var e=Math.floor(Math.random()*(a.props.searchStore.hotkey.length-9));return a.props.searchStore.hotkey.slice(e,e+9).map(function(e){return h.a.createElement("li",{className:"search_hot_key_item",key:e.n},e.k)})},a}return Object(i.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return h.a.createElement("div",{className:"search_hot_key_container"},h.a.createElement("ul",{className:"search_hot_key_wraper"},h.a.createElement("li",{className:"search_hot_key_title"},"\u70ed\u95e8\u641c\u7d22"),h.a.createElement("li",{className:"search_hot_key_item"},this.props.searchStore.special_key),this.hotKeyDisplay()))}}]),t}(l.Component)),E=(a(187),a(189)),C=a.n(E),A=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).searchHistory=function(e){a.props.searchHistoryAction(null,e),a.setState({historyKey:""})},a.historyKeyDisplay=function(){return a.state.historyKey?a.state.historyKey.map(function(e,t){return h.a.createElement("li",{key:t,className:"search_history_item",onClick:function(){return a.props.historyHotKeyToCurrentHotKey(e)}},h.a.createElement("div",{className:"search_history_img"},h.a.createElement("img",{src:C.a,alt:""})),h.a.createElement("div",null,e))}):null},a.state={historyKey:""},a}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.setState({historyKey:this.props.searchHistoryAction(null,"get")})}},{key:"render",value:function(){var e=this;return h.a.createElement("div",{className:"search_history_container"},h.a.createElement("div",{className:"search_history_title"},"\u641c\u7d22\u5386\u53f2",h.a.createElement("span",{onClick:this.props.searchHistoryDisplayCloseAction,className:"search_history_close"},"X")),h.a.createElement("ul",{className:"search_history_items"},this.historyKeyDisplay()),this.state.historyKey?h.a.createElement("div",{className:"search_history_footer",onClick:function(){return e.searchHistory("delete")}},"\u6e05\u7a7a\u641c\u7d22\u5386\u53f2"):null)}}]),t}(l.Component),K=(a(190),a(41)),b=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).searchListDisplay=function(e){return 0!==e.subcode?h.a.createElement("div",{className:"search_list_container"},h.a.createElement("div",{className:"search_list_container_close",onClick:a.props.searchListCloseAction},"X"),h.a.createElement("div",{className:"search_list_failed"},"\u672a\u65e0\u627e\u5230")):h.a.createElement("div",{className:"search_list_container"},h.a.createElement("div",{className:"search_list_container_close",onClick:a.props.searchListCloseAction},"X"),0!==e.data.zhida.type?h.a.createElement("div",{className:"search_list_title"},h.a.createElement("div",{className:"search_list_singer_img"},h.a.createElement("img",{src:"http://y.gtimg.cn/music/photo_new/T001R150x150M000".concat(e.data.zhida.singermid,".jpg?max_age=2592000"),alt:""})),h.a.createElement("div",{className:"search_list_singer_info"},h.a.createElement("div",null,e.data.zhida.singername),h.a.createElement("div",null,"\u5355\u66f2\uff1a",e.data.zhida.songnum),h.a.createElement("div",null,"\u4e13\u8f91\uff1a",e.data.zhida.albumnum),h.a.createElement("div",null,"(\u70b9\u51fb\u52a0\u5165\u6b4c\u5355\u64ad\u653e)"))):null,h.a.createElement(K.a,{bottom:a.props.playerStore.smallPlayer?"10vh":0,scrollName:"searchListScroll",top:0===e.data.zhida.type?"0px":"85px",dropDownRefresh:!0,ref:"searchListScroll",songlength:e.data.song.list.length,hotKeySearchAction:a.props.hotKeySearchAction,currentPage:e.data.song.curpage,totalSong:e.data.song.totalnum,keyWord:e.data.keyword},e.data.song.list.map(function(e,t){return h.a.createElement("div",{key:t,onClick:function(){a.props.songAddAction(e.songmid,e.albummid,e.interval,e.singer[0].name,e.songname)},className:"search_list_item"},h.a.createElement("div",{className:"search_list_item_index"},t+1),h.a.createElement("div",{className:"search_list_item_info"},h.a.createElement("div",null,e.songname),h.a.createElement("div",{className:"search_list_item_singername"},e.singer[0].name)))})))},a}return Object(i.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.searchListDisplay(this.props.searchStore.songList)}}]),t}(l.Component),k=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).onChange=function(e){a.setState(Object(r.a)({},e.target.name,e.target.value))},a.songAdd=function(e,t,r,n,o){a.props.songAddAction(a.props.playerStore.songList,a.props.playerStore.currentPlaySong,a.props.playerStore.playing,e,t,r,n,o)},a.hotKeySearch=function(e,t,r){if(e.preventDefault(),""===t.trim())return null;a.props.hotKeySearchAction(t),a.props.searchHistoryAction(t,r)},a.historyHotKeyToCurrentHotKey=function(e){a.setState({hotKey:e})},a.searchHotKey=function(e){return e.flag?h.a.createElement(l.Fragment,null,h.a.createElement("div",{className:"search_container"},h.a.createElement("div",{className:"search_input"},h.a.createElement("img",{src:_.a,alt:""}),h.a.createElement("input",{type:"text",name:"hotKey",onChange:function(e){return a.onChange(e)},value:a.state.hotKey,onFocus:function(){return a.props.searchHistoryDisplayAction()},placeholder:"\u641c\u7d22\u5173\u952e\u8bcd"})),h.a.createElement("span",{onClick:function(e){return a.hotKeySearch(e,a.state.hotKey,"set")},className:"search_button"},"\u641c\u7d22")),h.a.createElement("div",{className:"search_chilren_container"},e.searchFlag?e.searchListFlag?e.searchListLoadingFlag?h.a.createElement(b,{searchStore:e,playerStore:a.props.playerStore,hotKeySearchAction:a.props.hotKeySearchAction,songAddAction:a.songAdd,searchListCloseAction:a.props.searchListCloseAction}):h.a.createElement(v.a,null):h.a.createElement(A,{searchHistoryAction:a.props.searchHistoryAction,searchHistoryDisplayCloseAction:a.props.searchHistoryDisplayCloseAction,historyHotKeyToCurrentHotKey:a.historyHotKeyToCurrentHotKey}):h.a.createElement(S,{searchStore:e}))):h.a.createElement(v.a,null)},a.state={hotKey:""},a}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.searchAction()}},{key:"render",value:function(){var e=this.props.searchStore;return this.searchHotKey(e)}}]),t}(l.Component);t.default=Object(u.b)(function(e){return{searchStore:e.searchStore,playerStore:e.playerStore}},{searchAction:function(){return function(e){Object(p.a)("https://c.y.qq.com/splcloud/fcgi-bin/gethotkey.fcg?",{g_tk:5381,uin:0,format:"jsonp",inCharset:"utf-8",outCharset:"utf-8",notice:0,platform:"h5",needNewCode:1,_:154564564980},{param:"jsonpCallback"}).then(function(t){if(0!==t.code)return e({type:"error"});e({type:"search",data:t.data})})}},searchHistoryDisplayAction:function(){return function(e){return e({type:"searchHistoryDisplay"})}},searchHistoryDisplayCloseAction:function(){return function(e){return e({type:"searchHistoryDisplayClose"})}},hotKeySearchAction:function(e,t){return function(a){if(1===d)return null;d=1,a({type:"hotKeySearchLoading"}),function(e){var t={g_tk:5381,uin:0,format:"json",inCharset:"utf-8",outCharset:"utf-8",notice:0,platform:"h5",needNewCode:1,w:e,zhidaqu:1,catZhida:1,t:0,flag:1,ie:"utf-8",sem:1,aggr:0,perpage:20,n:20,p:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,remoteplace:"txt.mqq.all"};return y.a.get("/api/hotKey",{params:t})}(e,t).then(function(e){return 0===e.data.code?(d=0,e.data.data.song.curpage>1?a({type:"hotKeySearchRefersh",list:e.data.data.song.list,curpage:e.data.data.song.curpage}):a({type:"hotKeySearch",data:e.data})):a({type:"error"})})}},searchHistoryAction:function(e,t){var a=localStorage.getItem("myReactSearchHistory"),r=[];return function(n){if("get"===t)return a?(r=a.split(",").map(function(e){return decodeURIComponent(e)})).length>=8?r.slice(0,8):r:void 0;if("delete"===t&&localStorage.removeItem("myReactSearchHistory"),"set"===t)if(a){var o=(r=a.split(",")).indexOf(encodeURIComponent(e));if(o>=0){r.splice(o,o+1);var s=r.join(",");localStorage.setItem("myReactSearchHistory","".concat(encodeURIComponent(e),",").concat(s))}else localStorage.setItem("myReactSearchHistory","".concat(encodeURIComponent(e),",").concat(a))}else localStorage.setItem("myReactSearchHistory",encodeURIComponent(e))}},songAddAction:f.k,searchListCloseAction:function(){return function(e){return e({type:"searchListClose"})}}})(k)}}]);
//# sourceMappingURL=5.53019599.chunk.js.map