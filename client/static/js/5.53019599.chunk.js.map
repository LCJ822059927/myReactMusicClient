{"version":3,"sources":["common/image/search.svg","common/image/time.svg","action/searchAction.js","components/Search/SearchHotKey/SearchHotKey.js","components/Search/SearchHistory/SearchHistory.js","components/Search/SearList/SearchList.js","components/Search/Search.js","api/search.js"],"names":["module","exports","__webpack_require__","p","dropDownRefershCache","SearchHotKey","hotKeyDisplay","index","Math","floor","random","_this","props","searchStore","hotkey","length","slice","map","list","react_default","a","createElement","className","key","n","k","this","special_key","Component","SearchHistory","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","searchHistory","type","searchHistoryAction","setState","historyKey","historyKeyDisplay","state","onClick","historyHotKeyToCurrentHotKey","src","timeLogo","alt","_this2","searchHistoryDisplayCloseAction","SearchList","searchListDisplay","searchList","subcode","searchListCloseAction","data","zhida","concat","singermid","singername","songnum","albumnum","Scroll","bottom","playerStore","smallPlayer","scrollName","top","dropDownRefresh","ref","songlength","song","hotKeySearchAction","currentPage","curpage","totalSong","totalnum","keyWord","keyword","songAddAction","songmid","albummid","interval","singer","name","songname","songList","Search","onChange","e","defineProperty","target","value","songAdd","songMid","albumMid","singerName","songName","currentPlaySong","playing","hotKeySearch","hotKey","preventDefault","trim","searchHotKey","flag","react","searchLogo","onFocus","searchHistoryDisplayAction","placeholder","searchFlag","searchListFlag","searchListLoadingFlag","Search_SearList_SearchList","Loading","Search_SearchHistory_SearchHistory","Search_SearchHotKey_SearchHotKey","searchAction","connect","dispatch","Jsonp","g_tk","uin","format","inCharset","outCharset","notice","platform","needNewCode","_","param","then","res","code","nextPage","w","zhidaqu","catZhida","t","ie","sem","aggr","perpage","arguments","undefined","remoteplace","axios","get","params","hotKeySearchApi","oldHistory","localStorage","getItem","oldHistoryArr","split","oldHistoryItem","decodeURIComponent","removeItem","indexOf","encodeURIComponent","splice","newHistoryArr","join","setItem"],"mappings":"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","file":"static/js/5.53019599.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/search.7b54580f.svg\";","module.exports = __webpack_public_path__ + \"static/media/time.97254c86.svg\";","import {searchApi, hotKeySearchApi} from \"../api/search\";\r\nexport const searchAction = () => {\r\n    return dispatch => {\r\n        searchApi().then(res => {\r\n            if (res.code === 0) {\r\n                dispatch({type: \"search\", data: res.data})\r\n            } else {\r\n                return dispatch({type: 'error'})\r\n            }\r\n        })\r\n    }\r\n};\r\nexport const searchHistoryAction = (hotkey, type) => {\r\n    let oldHistory = localStorage.getItem('myReactSearchHistory');\r\n    let oldHistoryArr = [];\r\n    return dispatch => {\r\n        if (type === 'get') {\r\n            if (!oldHistory) {\r\n                return\r\n            } else {\r\n                oldHistoryArr = oldHistory.split(',').map(oldHistoryItem => decodeURIComponent(oldHistoryItem));\r\n                if(oldHistoryArr.length>=8){\r\n                    return oldHistoryArr.slice(0,8);\r\n                }\r\n                return oldHistoryArr;\r\n            }\r\n        }\r\n        if (type === 'delete') {\r\n            localStorage.removeItem('myReactSearchHistory')\r\n        }\r\n        if (type === 'set') {\r\n            if (!oldHistory) {\r\n                localStorage.setItem('myReactSearchHistory', encodeURIComponent(hotkey))\r\n            } else {\r\n                oldHistoryArr = oldHistory.split(',');\r\n                let index = oldHistoryArr.indexOf(encodeURIComponent(hotkey));\r\n                if (index >= 0) {\r\n                    oldHistoryArr.splice(index, index + 1);\r\n                    let newHistoryArr = oldHistoryArr.join(',');\r\n                    localStorage.setItem('myReactSearchHistory', `${encodeURIComponent(hotkey)},${newHistoryArr}`)\r\n                } else {\r\n                    localStorage.setItem('myReactSearchHistory', `${encodeURIComponent(hotkey)},${oldHistory}`)\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\nlet dropDownRefershCache=0;\r\nexport const hotKeySearchAction = (hotkey,nextPage) => {\r\n    return dispatch => {\r\n        if(dropDownRefershCache===1){\r\n            return null\r\n        }else{\r\n            dropDownRefershCache=1;\r\n            dispatch({type:'hotKeySearchLoading'})\r\n            hotKeySearchApi(hotkey,nextPage).then(res => {\r\n                if (res.data.code === 0) {\r\n                    dropDownRefershCache=0;\r\n                    if(res.data.data.song.curpage>1){\r\n                        return dispatch({type:'hotKeySearchRefersh',list:res.data.data.song.list,curpage:res.data.data.song.curpage})\r\n                    }\r\n                    return dispatch({type: 'hotKeySearch', data: res.data})\r\n                } else {\r\n                    return dispatch({type: 'error'})\r\n                }\r\n            })\r\n        }\r\n    }\r\n};\r\n\r\nexport const searchHistoryDisplayAction = () => {\r\n    return dispatch => dispatch({type: 'searchHistoryDisplay'})\r\n};\r\nexport const searchHistoryDisplayCloseAction = () => {\r\n    return dispatch => dispatch({type: 'searchHistoryDisplayClose'})\r\n};\r\nexport const searchListCloseAction=()=>{\r\n    return dispatch=>dispatch({type:\"searchListClose\"})\r\n};\r\n","import React, {Component} from 'react';\r\nimport './SearchHotKey.styl';\r\nimport propTypes from 'prop-types';\r\n\r\nclass SearchHotKey extends Component {\r\n    static propTypes={\r\n        searchStore:propTypes.object.isRequired\r\n    };\r\n    hotKeyDisplay=()=>{\r\n        let index=Math.floor(Math.random()*(this.props.searchStore.hotkey.length-9));\r\n        let newhotkey= this.props.searchStore.hotkey.slice(index,index+9);\r\n        return newhotkey.map(list=>{\r\n            return (\r\n                <li className='search_hot_key_item' key={list.n}>{list.k}</li>\r\n            )\r\n        })\r\n    };\r\n    render() {\r\n        return (\r\n            <div className='search_hot_key_container'>\r\n                <ul className='search_hot_key_wraper'>\r\n                    <li className='search_hot_key_title'>热门搜索</li>\r\n                    <li className='search_hot_key_item'>{this.props.searchStore.special_key}</li>\r\n                    {this.hotKeyDisplay()}\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default SearchHotKey\r\n","import React, {Component} from 'react';\r\nimport './SearchHistory.styl';\r\nimport timeLogo from '../../../common/image/time.svg';\r\nimport propTypes from 'prop-types';\r\n\r\nclass SearchHistory extends Component {\r\n    static propTypes = {\r\n        searchHistoryAction: propTypes.func.isRequired,\r\n        historyHotKeyToCurrentHotKey:propTypes.func.isRequired,\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            historyKey: ''\r\n        }\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.setState({\r\n            historyKey: this.props.searchHistoryAction(null, 'get')\r\n        })\r\n    }\r\n\r\n    searchHistory = (type) => {\r\n        this.props.searchHistoryAction(null, type);\r\n        this.setState({\r\n            historyKey: ''\r\n        })\r\n    };\r\n\r\n    historyKeyDisplay = () => {\r\n        if (!this.state.historyKey) {\r\n            return null\r\n        }\r\n        return this.state.historyKey.map((list, index) => {\r\n            return (\r\n                <li\r\n                    key={index} className='search_history_item'\r\n                    onClick={()=>this.props.historyHotKeyToCurrentHotKey(list)}\r\n                >\r\n                    <div className='search_history_img'>\r\n                        <img src={timeLogo} alt=\"\"/>\r\n                    </div>\r\n                    <div>{list}</div>\r\n                </li>\r\n            )\r\n        })\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className='search_history_container'>\r\n                <div className='search_history_title'>\r\n                    搜索历史\r\n                    <span onClick={this.props.searchHistoryDisplayCloseAction} className='search_history_close'>X</span>\r\n                </div>\r\n                <ul className='search_history_items'>\r\n                    {this.historyKeyDisplay()}\r\n                </ul>\r\n                {\r\n                    this.state.historyKey ?\r\n                        <div\r\n                            className='search_history_footer'\r\n                            onClick={() => this.searchHistory('delete')}\r\n                        >\r\n                            清空搜索历史\r\n                        </div>\r\n                        :\r\n                        null\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default SearchHistory\r\n","import React, {Component} from 'react';\r\nimport './SearchList.styl';\r\nimport Scroll from '../../common/Scroll/Scroll';\r\nimport PropTypes from 'prop-types';\r\nclass SearchList extends Component {\r\n    static propTypes={\r\n        songAddAction:PropTypes.func.isRequired,\r\n        hotKeySearchAction:PropTypes.func.isRequired,\r\n        playerStore:PropTypes.object.isRequired,\r\n        searchStore:PropTypes.object.isRequired,\r\n        searchListCloseAction:PropTypes.func.isRequired,\r\n    };\r\n    searchListDisplay = (searchList) => {\r\n        if (searchList.subcode !== 0) {\r\n            return(\r\n                <div className='search_list_container'>\r\n                    <div className='search_list_container_close' onClick={this.props.searchListCloseAction}>X</div>\r\n                    <div className='search_list_failed'>\r\n                        未无找到\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n        return (\r\n            <div className='search_list_container'>\r\n                <div className='search_list_container_close' onClick={this.props.searchListCloseAction}>X</div>\r\n                {\r\n                    searchList.data.zhida.type !== 0 ?\r\n                        <div className='search_list_title'>\r\n                            <div className='search_list_singer_img'>\r\n                                <img src={`http://y.gtimg.cn/music/photo_new/T001R150x150M000${searchList.data.zhida.singermid}.jpg?max_age=2592000`} alt=\"\"/>\r\n                            </div>\r\n                            <div className='search_list_singer_info'>\r\n                                <div>{searchList.data.zhida.singername}</div>\r\n                                <div>单曲：{searchList.data.zhida.songnum}</div>\r\n                                <div>专辑：{searchList.data.zhida.albumnum}</div>\r\n                                <div>(点击加入歌单播放)</div>\r\n                            </div>\r\n                        </div>\r\n                        :\r\n                        null\r\n                }\r\n                <Scroll\r\n                    bottom={!this.props.playerStore.smallPlayer ? 0 : '10vh'}\r\n                    scrollName='searchListScroll'\r\n                    top={searchList.data.zhida.type === 0 ? '0px' : '85px'}\r\n                    dropDownRefresh={true}\r\n                    ref='searchListScroll'\r\n                    songlength={searchList.data.song.list.length}\r\n                    hotKeySearchAction={this.props.hotKeySearchAction}\r\n                    currentPage={searchList.data.song.curpage}\r\n                    totalSong={searchList.data.song.totalnum}\r\n                    keyWord={searchList.data.keyword}\r\n                >\r\n                    {\r\n                        searchList.data.song.list.map((list, index) => {\r\n                            return (\r\n                                <div key={index} onClick={()=>{this.props.songAddAction(list.songmid, list.albummid, list.interval, list.singer[0].name, list.songname)}} className='search_list_item'>\r\n                                    <div className='search_list_item_index'>{index + 1}</div>\r\n                                    <div className='search_list_item_info'>\r\n                                        <div>{list.songname}</div>\r\n                                        <div className='search_list_item_singername'>{list.singer[0].name}</div>\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })\r\n                    }\r\n                </Scroll>\r\n            </div>\r\n        )\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            this.searchListDisplay(this.props.searchStore.songList)\r\n        )\r\n    }\r\n}\r\n\r\nexport default SearchList\r\n","import React, {Component, Fragment} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {\r\n    searchAction,\r\n    searchHistoryDisplayAction,\r\n    searchHistoryDisplayCloseAction,\r\n    hotKeySearchAction,\r\n    searchHistoryAction,\r\n    searchListCloseAction\r\n} from \"../../action/searchAction\";\r\nimport {songAddAction} from '../../action/songPlayerAction';\r\nimport propTypes from 'prop-types';\r\nimport './Search.styl';\r\nimport searchLogo from '../../common/image/search.svg';\r\nimport Loading from \"../common/Loading/Loading\";\r\nimport SearchHotKey from './SearchHotKey/SearchHotKey.js';\r\nimport SearchHistory from \"./SearchHistory/SearchHistory\";\r\nimport SearchList from \"./SearList/SearchList\";\r\n\r\n//引入组件\r\nclass Search extends Component {\r\n    static propTypes = {\r\n        searchStore: propTypes.object.isRequired,\r\n        searchAction: propTypes.func.isRequired,\r\n        searchHistoryDisplayAction: propTypes.func.isRequired,\r\n        searchHistoryDisplayCloseAction: propTypes.func.isRequired,\r\n        hotKeySearchAction: propTypes.func.isRequired,\r\n        searchHistoryAction: propTypes.func.isRequired,\r\n        playerStore: propTypes.object.isRequired,\r\n        songAddAction: propTypes.func.isRequired,\r\n        searchListCloseAction: propTypes.func.isRequired,\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            hotKey: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.searchAction();\r\n    }\r\n\r\n    onChange = (e) => {\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n    };\r\n    songAdd = (songMid, albumMid, interval, singerName, songName) => {\r\n        this.props.songAddAction(this.props.playerStore.songList, this.props.playerStore.currentPlaySong, this.props.playerStore.playing, songMid, albumMid, interval, singerName, songName)\r\n    };\r\n    hotKeySearch = (e,hotKey, type) => {\r\n        e.preventDefault();\r\n        if (hotKey.trim() === '') {\r\n            return null\r\n        } else {\r\n            this.props.hotKeySearchAction(hotKey);\r\n            this.props.searchHistoryAction(hotKey, type)\r\n        }\r\n    };\r\n    historyHotKeyToCurrentHotKey = (hotKey) => {\r\n        this.setState({\r\n            hotKey: hotKey\r\n        })\r\n    };\r\n    searchHotKey = (searchStore) => {\r\n        if (searchStore.flag) {\r\n            return (\r\n                <Fragment>\r\n                    <div className='search_container'>\r\n                        <div className='search_input'>\r\n                            <img src={searchLogo} alt=\"\"/>\r\n                            <input type=\"text\"\r\n                                   name='hotKey'\r\n                                   onChange={(e) => this.onChange(e)}\r\n                                   value={this.state.hotKey}\r\n                                   onFocus={() => this.props.searchHistoryDisplayAction()}\r\n                                   placeholder='搜索关键词'\r\n                            />\r\n                        </div>\r\n                        <span\r\n                            onClick={(e) => this.hotKeySearch(e,this.state.hotKey, 'set')}\r\n                            className='search_button'>搜索</span>\r\n                    </div>\r\n                    <div className='search_chilren_container'>\r\n                        {\r\n                            searchStore.searchFlag ? searchStore.searchListFlag ? searchStore.searchListLoadingFlag ?\r\n                                <SearchList\r\n                                    searchStore={searchStore}\r\n                                    playerStore={this.props.playerStore}\r\n                                    hotKeySearchAction={this.props.hotKeySearchAction}\r\n                                    songAddAction={this.songAdd}\r\n                                    searchListCloseAction={this.props.searchListCloseAction}\r\n                                />\r\n                                :\r\n                                <Loading/>\r\n                                :\r\n                                <SearchHistory\r\n                                    searchHistoryAction={this.props.searchHistoryAction}\r\n                                    searchHistoryDisplayCloseAction={this.props.searchHistoryDisplayCloseAction}\r\n                                    historyHotKeyToCurrentHotKey={this.historyHotKeyToCurrentHotKey}\r\n                                />\r\n                                :\r\n                                <SearchHotKey\r\n                                    searchStore={searchStore}\r\n                                />\r\n                        }\r\n                    </div>\r\n                </Fragment>\r\n            )\r\n        } else {\r\n            return <Loading/>\r\n\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {searchStore} = this.props;\r\n        return (\r\n            this.searchHotKey(searchStore)\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        searchStore: state.searchStore,\r\n        playerStore: state.playerStore\r\n    }\r\n};\r\nexport default connect(mapStateToProps, {\r\n    searchAction,\r\n    searchHistoryDisplayAction,\r\n    searchHistoryDisplayCloseAction,\r\n    hotKeySearchAction,\r\n    searchHistoryAction,\r\n    songAddAction,\r\n    searchListCloseAction\r\n})(Search)\r\n","import Jsonp from '../common/js/myJsonp';\r\nimport axios from \"axios\";\r\n\r\nexport const searchApi = () => {\r\n    const url = 'https://c.y.qq.com/splcloud/fcgi-bin/gethotkey.fcg?';\r\n    const Options = {\r\n        param: 'jsonpCallback'\r\n    };\r\n    const data = {\r\n        g_tk: 5381,\r\n        uin: 0,\r\n        format: 'jsonp',\r\n        inCharset: 'utf-8',\r\n        outCharset: 'utf-8',\r\n        notice: 0,\r\n        platform: 'h5',\r\n        needNewCode: 1,\r\n        _: 154564564980,\r\n    };\r\n    return Jsonp(url, data, Options)\r\n};\r\nexport const hotKeySearchApi = (hotkey,nextPage=1) => {\r\n    const value = {\r\n        g_tk: 5381,\r\n        uin: 0,\r\n        format: 'json',\r\n        inCharset: 'utf-8',\r\n        outCharset: 'utf-8',\r\n        notice: 0,\r\n        platform: 'h5',\r\n        needNewCode: 1,\r\n        w: hotkey,\r\n        zhidaqu: 1,\r\n        catZhida: 1,\r\n        t: 0,\r\n        flag: 1,\r\n        ie: 'utf-8',\r\n        sem: 1,\r\n        aggr: 0,\r\n        perpage: 20,\r\n        n: 20,\r\n        p: nextPage,\r\n        remoteplace: 'txt.mqq.all'\r\n    };\r\n    return axios.get('/api/hotKey', {\r\n        params: value\r\n    })\r\n};\r\n"],"sourceRoot":""}